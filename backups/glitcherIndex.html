<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Professional Glitch Art Studio</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      min-height: 100vh;
      color: #ffffff;
      overflow-x: auto;
    }

    .studio-container {
      display: grid;
      grid-template-columns: 400px 1fr;
      min-height: 100vh;
      gap: 20px;
      padding: 20px;
    }

    /* Control Panel Styling */
    .control-panel {
      background: linear-gradient(145deg, #2a2a40, #1f1f35);
      border-radius: 20px;
      padding: 25px;
      box-shadow: 
        inset -5px -5px 10px rgba(0,0,0,0.3),
        inset 5px 5px 10px rgba(255,255,255,0.1),
        0 20px 40px rgba(0,0,0,0.4);
      border: 1px solid rgba(255,255,255,0.1);
      overflow-y: auto;
      max-height: calc(100vh - 40px);
    }

    .panel-header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid rgba(255,255,255,0.1);
    }

    .panel-title {
      font-size: 24px;
      font-weight: bold;
      background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 8px;
    }

    .panel-subtitle {
      font-size: 14px;
      color: #888;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    /* Control Groups */
    .control-group {
      background: linear-gradient(145deg, #1f1f35, #2a2a40);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      border: 1px solid rgba(255,255,255,0.05);
      box-shadow: 
        inset 2px 2px 5px rgba(0,0,0,0.3),
        inset -2px -2px 5px rgba(255,255,255,0.05);
    }

    .group-title {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #ff6b6b;
      text-transform: uppercase;
      letter-spacing: 1px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* File Upload Styling */
    .file-upload-area {
      border: 2px dashed rgba(255,255,255,0.3);
      border-radius: 12px;
      padding: 30px 20px;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
      background: linear-gradient(145deg, #1a1a30, #252540);
    }

    .file-upload-area:hover {
      border-color: #4ecdc4;
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(78, 205, 196, 0.2);
    }

    .upload-icon {
      font-size: 48px;
      margin-bottom: 15px;
      color: #4ecdc4;
    }

    .upload-text {
      font-size: 16px;
      margin-bottom: 8px;
      font-weight: bold;
    }

    .upload-hint {
      font-size: 12px;
      color: #888;
    }

    #image-input {
      display: none;
    }

    /* Button Styling */
    .control-button {
      background: linear-gradient(145deg, #4ecdc4, #45b7d1);
      border: none;
      border-radius: 12px;
      padding: 12px 20px;
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 6px 15px rgba(78, 205, 196, 0.3);
      text-transform: uppercase;
      letter-spacing: 1px;
      font-size: 12px;
      margin: 5px;
    }

    .control-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(78, 205, 196, 0.4);
    }

    .danger-button {
      background: linear-gradient(145deg, #ff6b6b, #ff5252);
    }

    .success-button {
      background: linear-gradient(145deg, #66bb6a, #4caf50);
    }

    .toggle-button {
      background: linear-gradient(145deg, #ffa726, #ff9800);
      min-width: 60px;
    }

    /* Select Styling */
    .control-select {
      background: linear-gradient(145deg, #2a2a40, #1f1f35);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 8px;
      padding: 10px 15px;
      color: white;
      font-size: 14px;
      cursor: pointer;
      width: 100%;
      margin-bottom: 10px;
    }

    .control-select:focus {
      outline: none;
      border-color: #4ecdc4;
      box-shadow: 0 0 10px rgba(78, 205, 196, 0.3);
    }

    .control-select option {
      background: #2a2a40;
      color: white;
    }

    /* Slider Styling */
    .slider-container {
      margin-bottom: 15px;
    }

    .slider-label {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      font-size: 14px;
      font-weight: bold;
    }

    .slider-value {
      background: linear-gradient(45deg, #4ecdc4, #45b7d1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-size: 16px;
      min-width: 50px;
      text-align: right;
    }

    .control-slider {
      width: 100%;
      height: 8px;
      border-radius: 5px;
      background: linear-gradient(to right, #1f1f35, #2a2a40);
      outline: none;
      cursor: pointer;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
    }

    .control-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: linear-gradient(145deg, #4ecdc4, #45b7d1);
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    /* Checkbox Styling */
    .checkbox-container {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    .control-checkbox {
      width: 20px;
      height: 20px;
      background: linear-gradient(145deg, #2a2a40, #1f1f35);
      border: 2px solid rgba(255,255,255,0.2);
      border-radius: 4px;
      cursor: pointer;
      position: relative;
      -webkit-appearance: none;
      -moz-appearance: none;
      appearance: none;
    }

    .control-checkbox:checked {
      background: linear-gradient(145deg, #4ecdc4, #45b7d1);
      border-color: #4ecdc4;
    }

    .control-checkbox:checked::after {
      content: '‚úì';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-weight: bold;
      font-size: 14px;
    }

    /* Canvas Area */
    .canvas-area {
      background: linear-gradient(145deg, #2a2a40, #1f1f35);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 
        inset -5px -5px 10px rgba(0,0,0,0.3),
        inset 5px 5px 10px rgba(255,255,255,0.1),
        0 20px 40px rgba(0,0,0,0.4);
      border: 1px solid rgba(255,255,255,0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 600px;
    }

    .canvas-placeholder {
      text-align: center;
      color: #666;
      font-size: 18px;
    }

    .canvas-placeholder-icon {
      font-size: 64px;
      margin-bottom: 20px;
      color: #444;
    }

    #canvas {
      max-width: 100%;
      max-height: 70vh;
      border-radius: 15px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.3);
      border: 2px solid rgba(255,255,255,0.1);
    }

    /* Button Grid */
    .button-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }

    .button-grid-full {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 10px;
    }

    /* Status Indicator */
    .status-indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #66bb6a;
      box-shadow: 0 0 10px rgba(102, 187, 106, 0.5);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.2); opacity: 0.7; }
      100% { transform: scale(1); opacity: 1; }
    }

    .status-indicator.paused {
      background: #ffa726;
      box-shadow: 0 0 10px rgba(255, 167, 38, 0.5);
    }

    /* Utility Classes */
    .flex-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .text-small {
      font-size: 12px;
      color: #888;
      margin-top: 5px;
    }

    /* Responsive Design */
    @media (max-width: 900px) {
      .studio-container {
        grid-template-columns: 1fr;
        grid-template-rows: auto 1fr;
      }
      
      .control-panel {
        max-height: none;
        order: 2;
      }
      
      .canvas-area {
        order: 1;
        min-height: 400px;
      }
    }
  </style>
</head>
<body>
  <div class="studio-container">
    <!-- Control Panel -->
    <div class="control-panel">
      <div class="panel-header">
        <div class="panel-title">Glitch Art Studio</div>
        <div class="panel-subtitle">Professional Image Manipulation</div>
      </div>

      <!-- Image Upload -->
      <div class="control-group">
        <div class="group-title">üìÅ Image Source</div>
        <div class="file-upload-area" onclick="document.getElementById('image-input').click()">
          <div class="upload-icon">üñºÔ∏è</div>
          <div class="upload-text">Drop Image Here</div>
          <div class="upload-hint">or click to browse</div>
          <input type="file" id="image-input" accept="image/*">
        </div>
      </div>

      <!-- Intensity -->
      <div class="control-group">
        <div class="group-title">‚ö° Intensity</div>
        <select id="intensity-select" class="control-select">
          <option value="medium">üü° Medium</option>
          <option value="large">üü† Large</option>
          <option value="extraLarge">üî¥ Extra Large</option>
        </select>
      </div>

      <!-- Direction Controls -->
      <div class="control-group">
        <div class="group-title">üß≠ Movement Direction</div>
        <select id="direction-select" class="control-select">
          <option value="off">Off</option>
          <option value="down">‚¨áÔ∏è Down</option>
          <option value="up">‚¨ÜÔ∏è Up</option>
          <option value="right">‚û°Ô∏è Right</option>
          <option value="left">‚¨ÖÔ∏è Left</option>
          <option value="random">üé≤ Random</option>
          <option value="jitter">‚ö° Jitter</option>
        </select>
        <div class="slider-container">
          <div class="slider-label">
            <span>‚ö° Shift Speed</span>
            <span id="speed-value" class="slider-value">1</span>
          </div>
          <input type="range" id="speed-range" class="control-slider" min="1" max="5" step="1" value="1">
        </div>
      </div>

      <!-- Spiral Controls -->
      <div class="control-group">
        <div class="group-title">üåÄ Spiral Effects</div>
        <select id="spiral-select" class="control-select">
          <option value="off">Off</option>
          <option value="spiral">üåÄ Spiral</option>
          <option value="insideOut">üì§ Inside-Out</option>
          <option value="outsideIn">üì• Outside-In</option>
          <option value="random">üé≤ Random</option>
        </select>
        <div class="flex-row">
          <button id="spiral-direction-btn" class="control-button toggle-button">CW</button>
          <div class="text-small">Spiral Direction</div>
        </div>
        <div class="slider-container">
          <div class="slider-label">
            <span>üí´ Swirl Strength</span>
            <span id="swirl-value" class="slider-value">0.06</span>
          </div>
          <input type="range" id="swirl-range" class="control-slider" min="0.01" max="0.15" step="0.01" value="0.06">
        </div>
      </div>

      <!-- Slice Effects -->
      <div class="control-group">
        <div class="group-title">‚úÇÔ∏è Slice Glitch</div>
        <select id="slice-select" class="control-select">
          <option value="off">Off</option>
          <option value="horizontal">‚ÜîÔ∏è Horizontal</option>
          <option value="vertical">‚ÜïÔ∏è Vertical</option>
          <option value="both">‚ö° Both</option>
        </select>
        <div class="slider-container">
          <div class="slider-label">
            <span>üé® Color Offset</span>
            <span id="color-offset-value" class="slider-value">20</span>
          </div>
          <input type="range" id="color-offset-range" class="control-slider" min="0" max="50" step="1" value="20">
        </div>
      </div>

      <!-- Pixel Sort -->
      <div class="control-group">
        <div class="group-title">üîÄ Pixel Sort</div>
        <select id="pixel-sort-select" class="control-select">
          <option value="off">Off</option>
          <option value="columnBrightness">üîÜ Columns by Brightness</option>
          <option value="rowBrightness">üîÖ Rows by Brightness</option>
          <option value="columnHue">üåà Columns by Hue</option>
          <option value="rowHue">üé® Rows by Hue</option>
          <option value="randomLines">üé≤ Random Lines</option>
          <option value="diagonal">üìê Diagonal Sort</option>
          <option value="circular">‚≠ï Circular Sort</option>
        </select>
        <div class="slider-container">
          <div class="slider-label">
            <span>üîÑ Sort Frequency</span>
            <span id="sort-frequency-value" class="slider-value">30</span>
          </div>
          <input type="range" id="sort-frequency-range" class="control-slider" min="1" max="100" step="1" value="30">
        </div>
      </div>

      <!-- Color Effects -->
      <div class="control-group">
        <div class="group-title">üé® Color Effects</div>
        <select id="color-effect-select" class="control-select">
          <option value="off">Off</option>
          <option value="chromaticAberration">üì∫ Chromatic Aberration</option>
          <!-- <option value="colorSeparation">üî¥ RGB Separation</option> REMOVED -->
          <option value="hueShift">üåà Hue Shift</option>
          <option value="saturation">üíé Saturation Boost</option>
          <option value="invert">üîÑ Color Invert</option>
          <option value="vintage">üì∏ Vintage</option>
        </select>
        <div class="slider-container">
          <div class="slider-label">
            <span>üéöÔ∏è Effect Intensity</span>
            <span id="color-intensity-value" class="slider-value">50</span>
          </div>
          <input type="range" id="color-intensity-range" class="control-slider" min="0" max="100" step="1" value="50">
        </div>

        <!-- NEW: Invert Color Specific Parameters -->
        <div id="invert-color-params-container" style="display: none; margin-top: 15px;">
          <div class="slider-container"> <!-- Reusing slider-container for consistent styling -->
            <div class="slider-label">
              <span>‚öñÔ∏è Inversion Type</span>
            </div>
            <select id="invertColorTypeSelect" class="control-select" style="width: 100%;">
              <option value="full_rgb" selected>Full RGB</option>
              <option value="red_only">Red Channel Only</option>
              <option value="green_only">Green Channel Only</option>
              <option value="blue_only">Blue Channel Only</option>
            </select>
          </div>
        </div>

        <!-- NEW: Chromatic Aberration Specific Parameters -->
        <div id="chromatic-aberration-params-container" style="display: none; margin-top: 15px;">
          <div class="slider-container"> <!-- Reusing slider-container for consistent styling -->
            <div class="slider-label">
              <span>üåÄ Mode</span>
              <!-- Value display for select might not be needed if options are descriptive -->
            </div>
            <select id="chromaticAberrationModeSelect" class="control-select" style="width: 100%;">
              <option value="horizontal" selected>Horizontal</option>
              <option value="vertical">Vertical</option>
              <option value="radial">Radial</option>
              <option value="custom">Custom Angle</option>
            </select>
          </div>

          <div id="chromatic-aberration-angle-control-container" style="display: none; margin-top: 10px;">
            <div class="slider-container">
              <div class="slider-label">
                <span>üìê Custom Angle</span>
                <span id="chromaticAberrationAngleValue" class="slider-value">0</span>
              </div>
              <input type="range" id="chromaticAberrationAngleRange" class="control-slider" min="0" max="360" step="1" value="0">
            </div>
          </div>
        </div>
        <!-- END NEW -->
      </div>

      <!-- Datamoshing -->
      <div class="control-group">
        <div class="group-title">üíæ Datamosh</div>
        <select id="datamosh-select" class="control-select">
          <option value="off">Off</option>
          <option value="randomBytes">üé≤ Random Bytes</option>
          <option value="bitShift">‚ö° Bit Shifting</option>
          <option value="compression">üì¶ Compression Artifacts</option>
          <option value="scanlines">üì∫ Scanlines</option>
        </select>
        <div class="slider-container">
          <div class="slider-label">
            <span>üî• Corruption Level</span>
            <span id="datamosh-intensity-value" class="slider-value">10</span>
          </div>
          <input type="range" id="datamosh-intensity-range" class="control-slider" min="0" max="100" step="1" value="10">
        </div>
      </div>

      <!-- Audio Reactive -->
      <div class="control-group">
        <div class="group-title">üéµ Audio Reactive</div>
        <div class="checkbox-container">
          <input type="checkbox" id="audio-reactive-checkbox" class="control-checkbox">
          <label for="audio-reactive-checkbox">üé§ Enable Microphone</label>
        </div>
        <div class="slider-container">
          <div class="slider-label">
            <span>üéöÔ∏è Audio Sensitivity</span>
            <span id="audio-sensitivity-value" class="slider-value">50</span>
          </div>
          <input type="range" id="audio-sensitivity-range" class="control-slider" min="0" max="100" step="1" value="50">
        </div>
        <div class="text-small">Effects respond to microphone input</div>
      </div>


      <!-- Clump Lifetime -->
      <div class="control-group">
        <div class="group-title">‚è±Ô∏è Effect Duration</div>
        <div class="slider-container">
          <div class="slider-label">
            <span>Min Lifetime</span>
            <span id="min-lifetime-value" class="slider-value">90</span>
          </div>
          <input type="range" id="min-lifetime" class="control-slider" min="1" max="300" step="1" value="90">
        </div>
        <div class="slider-container">
          <div class="slider-label">
            <span>Max Lifetime</span>
            <span id="max-lifetime-value" class="slider-value">150</span>
          </div>
          <input type="range" id="max-lifetime" class="control-slider" min="1" max="300" step="1" value="150">
        </div>
      </div>

      <!-- Control Buttons -->
      <div class="control-group">
        <div class="group-title">üéÆ Controls</div>
        <div class="button-grid">
          <button id="play-pause-btn" class="control-button success-button">
            <div class="flex-row">
              <div class="status-indicator" id="status-indicator"></div>
              <span>‚è∏Ô∏è Pause</span>
            </div>
          </button>
          <button id="reset-btn" class="control-button danger-button">üîÑ Reset</button>
        </div>
        <div class="button-grid-full">
          <button id="randomize-btn" class="control-button">üé≤ Randomize All</button>
        </div>
      </div>

      <!-- Presets & Saving -->
      <div class="control-group">
        <div class="group-title">üíæ Presets</div>
        <div class="button-grid">
          <button id="save-preset-btn" class="control-button">üíæ Save Preset</button>
          <button id="load-preset-btn" class="control-button">üìÇ Load Preset</button>
        </div>
        <select id="preset-select" class="control-select">
          <option value="">Choose Preset...</option>
          <option value="vintage-tv">üì∫ Vintage TV</option>
          <option value="digital-chaos">‚ö° Digital Chaos</option>
          <option value="rainbow-sort">üåà Rainbow Sort</option>
          <option value="cyberpunk">ü§ñ Cyberpunk</option>
          <option value="film-burn">üî• Film Burn</option>
        </select>
        <input type="file" id="preset-file-input" accept=".json" style="display: none;">
        <div class="text-small">Save/load your favorite effect combinations</div>
      </div>

      <!-- Recording -->
      <div class="control-group">
        <div class="group-title">üé¨ Recording</div>
        <div class="slider-container">
          <div class="slider-label">
            <span>‚è±Ô∏è Duration (seconds)</span>
            <span id="record-value" class="slider-value">5</span>
          </div>
          <input type="range" id="record-range" class="control-slider" min="1" max="20" step="1" value="5">
        </div>
        <div class="checkbox-container">
          <input type="checkbox" id="reverse-checkbox" class="control-checkbox">
          <label for="reverse-checkbox">üîÑ Reverse Video</label>
        </div>
        <div class="button-grid">
          <button id="record-btn" class="control-button">üé• Record</button>
          <button id="snapshot-btn" class="control-button">üì∑ Snapshot</button>
        </div>
        <button id="batch-export-btn" class="control-button" style="width: 100%; margin-top: 10px;">üì¶ Batch Export (10 variations)</button>
      </div>
    </div>

    <!-- Canvas Area -->
    <div class="canvas-area">
      <canvas id="canvas" style="display: none;"></canvas>
      <div id="canvas-placeholder" class="canvas-placeholder">
        <div class="canvas-placeholder-icon">üé®</div>
        <div>Upload an image to start creating glitch art</div>
        <div class="text-small">Supports JPG, PNG, GIF formats</div>
      </div>
    </div>
  </div>

  <script src="glitcher.js"></script>
</body>
</html>